# World ID çœŸäººé©—è­‰è¨­ç½®æŒ‡å— ğŸŒğŸ”

é€™ä»½æŒ‡å—å°‡å¹«åŠ©ä½ åœ¨ World Developer Portal ä¸­è¨­ç½®çœŸäººé©—è­‰åŠŸèƒ½ã€‚

## ğŸ¯ ä»€éº¼æ˜¯ World ID é©—è­‰ï¼Ÿ

World ID æ˜¯ Worldcoin æä¾›çš„çœŸäººé©—è­‰ç³»çµ±ï¼Œå¯ä»¥ç¢ºä¿ï¼š
- âœ… æ¯å€‹ç”¨æˆ¶éƒ½æ˜¯çœŸå¯¦çš„äººé¡
- âœ… ä¸€äººä¸€è™Ÿï¼Œé˜²æ­¢æ©Ÿå™¨äººå’Œå¤šé‡å¸³è™Ÿ
- âœ… éš±ç§ä¿è­·ï¼Œä½¿ç”¨é›¶çŸ¥è­˜è­‰æ˜æŠ€è¡“

## ğŸ“‹ è¨­ç½®æ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šåœ¨ Developer Portal å‰µå»ºé©—è­‰å‹•ä½œ

1. **ç™»å…¥ Developer Portal**
   ```
   https://developer.worldcoin.org/
   ```

2. **é¸æ“‡ä½ çš„ Mini App**
   - æ‰¾åˆ°ã€Œæ¥µç°¡åœè»Šã€
   - é€²å…¥ App è¨­ç½®é é¢

3. **å‰µå»º Incognito Actionï¼ˆé©—è­‰å‹•ä½œï¼‰**
   - é€²å…¥ **Actions** æˆ– **Verification** æ¨™ç±¤
   - é»æ“Š **Create Action** æˆ– **New Action**

4. **å¡«å¯«å‹•ä½œè³‡è¨Š**
   ```
   Action ID: verify-parking-game
   Name: åœè»ŠéŠæˆ²çœŸäººé©—è­‰
   Description: é©—è­‰ç©å®¶æ˜¯çœŸå¯¦ç”¨æˆ¶ï¼Œé˜²æ­¢æ©Ÿå™¨äººä½œå¼Š
   Action Type: Incognito Action
   ```

5. **è¨­ç½®é©—è­‰ç­‰ç´š**
   - **Orb Verification**: é€šé Orb è™¹è†œæƒæçš„ç”¨æˆ¶ï¼ˆæœ€é«˜å®‰å…¨ç´šåˆ¥ï¼‰
   - **Device Verification**: é€šéæ‰‹æ©Ÿé©—è­‰çš„ç”¨æˆ¶ï¼ˆåŸºæœ¬ç´šåˆ¥ï¼‰
   
   å»ºè­°ï¼šé¸æ“‡ **Device** è®“æ›´å¤šç”¨æˆ¶å¯ä»¥ç©éŠæˆ²

6. **ä¿å­˜å‹•ä½œ**
   - é»æ“Š **Create** æˆ– **Save**
   - è¨˜ä¸‹ä½ çš„ **Action ID**ï¼ˆæ‡‰è©²æ˜¯ `verify-parking-game`ï¼‰

---

## ğŸ”§ é©—è­‰ç­‰ç´šèªªæ˜

### ğŸŒ Orb Verificationï¼ˆOrb é©—è­‰ï¼‰
- æœ€é«˜å®‰å…¨ç´šåˆ¥
- éœ€è¦é€šé Orb è¨­å‚™é€²è¡Œè™¹è†œæƒæ
- é©åˆï¼šé«˜åƒ¹å€¼äº¤æ˜“ã€é‡è¦æŠ•ç¥¨ã€é˜²ä½œå¼Šè¦æ±‚æ¥µé«˜çš„å ´æ™¯
- å„ªé»ï¼šå¹¾ä¹ä¸å¯èƒ½å½é€ 
- ç¼ºé»ï¼šç”¨æˆ¶è¼ƒå°‘

### ğŸ“± Device Verificationï¼ˆè£ç½®é©—è­‰ï¼‰
- åŸºæœ¬å®‰å…¨ç´šåˆ¥
- åªéœ€è¦æ‰‹æ©Ÿè™Ÿç¢¼é©—è­‰
- é©åˆï¼šä¸€èˆ¬éŠæˆ²ã€ç¤¾äº¤æ‡‰ç”¨ã€å¤§å¤šæ•¸ Mini Apps
- å„ªé»ï¼šç”¨æˆ¶ç¾¤å¤§ï¼Œå…¥é–€é–€æª»ä½
- ç¼ºé»ï¼šå®‰å…¨æ€§è¼ƒä½ï¼ˆä½†ä»é å„ªæ–¼ç„¡é©—è­‰ï¼‰

### æ¨è–¦è¨­ç½®
å°æ–¼ã€Œæ¥µç°¡åœè»Šã€é€™æ¨£çš„ä¼‘é–’éŠæˆ²ï¼Œå»ºè­°ä½¿ç”¨ **Device Verification**ï¼š
```javascript
verification_level: 'device' // åœ¨ä»£ç¢¼ä¸­å¯ä»¥èª¿æ•´
```

å¦‚æœä½ æƒ³è¦æœ€é«˜å®‰å…¨æ€§ï¼Œå¯ä»¥æ”¹ç‚ºï¼š
```javascript
verification_level: 'orb'
```

---

## ğŸ’» ä»£ç¢¼é…ç½®

### ç•¶å‰è¨­ç½®

åœ¨ `minikit-integration.js` ä¸­ï¼š

```javascript
// ç¬¬ 10 è¡Œ
this.actionId = 'verify-parking-game'; // ä½ çš„é©—è­‰å‹•ä½œ ID

// ç¬¬ 99 è¡Œ
verification_level: 'orb', // å¯ä»¥æ”¹ç‚º 'device'
```

### ä¿®æ”¹é©—è­‰ç­‰ç´š

å¦‚æœä½ æƒ³æ”¹ç”¨è£ç½®é©—è­‰ï¼ˆæ¨è–¦ï¼‰ï¼š

1. æ‰“é–‹ `minikit-integration.js`
2. æ‰¾åˆ°ç¬¬ 99 è¡Œ
3. å°‡ `'orb'` æ”¹ç‚º `'device'`ï¼š
   ```javascript
   verification_level: 'device', // 'orb' æˆ– 'device'
   ```

---

## ğŸ§ª æ¸¬è©¦é©—è­‰åŠŸèƒ½

### åœ¨æœ¬åœ°ç€è¦½å™¨æ¸¬è©¦ï¼ˆé–‹ç™¼æ¨¡å¼ï¼‰

1. è¨ªå• `http://localhost:8000`
2. é»æ“Šã€ŒğŸŒ ä½¿ç”¨ World ID é©—è­‰ã€
3. æœƒè‡ªå‹•æ¨¡æ“¬é©—è­‰æˆåŠŸ
4. ã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•è®Šç‚ºå¯ç”¨

**é–‹ç™¼æ¨¡å¼ç‰¹é»ï¼š**
- è‡ªå‹•è·³éçœŸå¯¦é©—è­‰
- æ¨¡æ“¬æˆåŠŸå›æ‡‰
- æ–¹ä¾¿å¿«é€Ÿæ¸¬è©¦éŠæˆ²é‚è¼¯

### åœ¨ World App ä¸­æ¸¬è©¦ï¼ˆçœŸå¯¦é©—è­‰ï¼‰

1. åœ¨ World App ä¸­æ‰“é–‹ä½ çš„ Mini App
2. é»æ“Šã€ŒğŸŒ ä½¿ç”¨ World ID é©—è­‰ã€
3. World App æœƒå¼•å°ä½ å®Œæˆé©—è­‰æµç¨‹ï¼š
   - å¦‚æœé¸æ“‡ Orbï¼šéœ€è¦å‰å¾€ Orb è¨­å‚™
   - å¦‚æœé¸æ“‡ Deviceï¼šåªéœ€ç¢ºèªå³å¯ï¼ˆå¦‚æœå·²é©—è­‰éï¼‰
4. é©—è­‰æˆåŠŸå¾Œé¡¯ç¤ºç¶ è‰²å‹¾é¸ âœ…
5. å¯ä»¥é–‹å§‹éŠæˆ²

---

## ğŸ” å®‰å…¨æ€§èªªæ˜

### Nullifier Hashï¼ˆå”¯ä¸€æ¨™è­˜ç¬¦ï¼‰

æ¯æ¬¡é©—è­‰æœƒç”Ÿæˆä¸€å€‹ `nullifier_hash`ï¼š
- å°æ–¼åŒä¸€å€‹ action å’Œç”¨æˆ¶ï¼Œé€™å€‹ hash æ˜¯å›ºå®šçš„
- ä½†ä¸æœƒæš´éœ²ç”¨æˆ¶çš„çœŸå¯¦èº«ä»½
- å¯ä»¥ç”¨ä¾†é˜²æ­¢åŒä¸€å€‹ç”¨æˆ¶é‡è¤‡é ˜å–çå‹µ

### é˜²é‡æ”¾æ”»æ“Š

ä½¿ç”¨ `signal` åƒæ•¸ï¼š
```javascript
signal: this.generateNonce(), // æ¯æ¬¡éƒ½ä¸åŒçš„éš¨æ©Ÿå€¼
```

### å¾Œç«¯é©—è­‰ï¼ˆé‡è¦ï¼ï¼‰

**âš ï¸ å®‰å…¨è­¦å‘Šï¼šå‰ç«¯é©—è­‰å¯ä»¥è¢«ç¹éï¼**

åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­ï¼Œä½ **å¿…é ˆ**åœ¨å¾Œç«¯é©—è­‰ proofï¼š

```javascript
// åœ¨ minikit-integration.js çš„ verifyProofWithBackend å‡½æ•¸ä¸­
const response = await fetch('YOUR_BACKEND_URL/api/verify', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        proof: payload.proof,
        merkle_root: payload.merkle_root,
        nullifier_hash: payload.nullifier_hash,
        verification_level: payload.verification_level,
        action: this.actionId,
        signal: payload.signal,
    })
});
```

å¾Œç«¯éœ€è¦èª¿ç”¨ World API é©—è­‰ proofï¼š
```
POST https://developer.worldcoin.org/api/v2/verify
```

è©³ç´° API æ–‡æª”ï¼šhttps://docs.world.org/mini-apps/reference/api#verify-proof

---

## ğŸ“± ç”¨æˆ¶é«”é©—æµç¨‹

### é¦–æ¬¡æ‰“é–‹éŠæˆ²

1. çœ‹åˆ°é–‹å§‹ç•«é¢
2. é¡¯ç¤ºã€ŒğŸŒ ä½¿ç”¨ World ID é©—è­‰ã€æŒ‰éˆ•
3. æç¤ºï¼šã€Œéœ€è¦ World ID é©—è­‰æ‰èƒ½é–‹å§‹éŠæˆ²ã€
4. ã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•æ˜¯ç°è‰²çš„ï¼ˆä¸å¯é»æ“Šï¼‰

### é»æ“Šé©—è­‰æŒ‰éˆ•

1. æŒ‰éˆ•æ–‡å­—è®Šç‚ºã€Œé©—è­‰ä¸­...ã€
2. World App é¡¯ç¤ºé©—è­‰æµç¨‹
3. ç”¨æˆ¶ç¢ºèªé©—è­‰

### é©—è­‰æˆåŠŸ

1. æŒ‰éˆ•æ¶ˆå¤±
2. é¡¯ç¤ºç¶ è‰²çš„ã€Œâœ… çœŸäººé©—è­‰æˆåŠŸã€
3. é¡¯ç¤ºé©—è­‰ç­‰ç´šï¼ˆğŸŒ Orb é©—è­‰ æˆ– ğŸ“± è£ç½®é©—è­‰ï¼‰
4. ã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•è®Šç‚ºå¯é»æ“Š
5. æ‰‹æ©Ÿéœ‡å‹•åé¥‹

### é©—è­‰å¤±æ•—

1. é¡¯ç¤ºéŒ¯èª¤æç¤º
2. æŒ‰éˆ•æ¢å¾©ç‚ºã€ŒğŸŒ ä½¿ç”¨ World ID é©—è­‰ã€
3. å¯ä»¥é‡æ–°å˜—è©¦

---

## ğŸ® éŠæˆ²ä¸­çš„æ‡‰ç”¨

### é˜²æ­¢ä½œå¼Š

æ¯å€‹é©—è­‰çš„ `nullifier_hash` æ˜¯å”¯ä¸€çš„ï¼š
```javascript
// å¯ä»¥å„²å­˜ nullifier_hash ä¾†è¿½è¹¤ç”¨æˆ¶
const nullifierHash = payload.nullifier_hash;
// ç”¨æ–¼é˜²æ­¢åŒä¸€ç”¨æˆ¶é‡è¤‡é ˜ç
```

### æ’è¡Œæ¦œ

åªé¡¯ç¤ºå·²é©—è­‰ç”¨æˆ¶çš„æˆç¸¾ï¼š
```javascript
if (worldMiniKit.isVerified) {
    // æäº¤åˆ†æ•¸åˆ°æ’è¡Œæ¦œ
    submitScore(score, nullifierHash);
}
```

### çå‹µç³»çµ±

ç¢ºä¿æ¯å€‹çœŸå¯¦ç”¨æˆ¶åªèƒ½é ˜å–ä¸€æ¬¡ï¼š
```javascript
// å¾Œç«¯æª¢æŸ¥
if (hasReceivedReward(nullifierHash)) {
    return { error: 'å·²é ˜å–éçå‹µ' };
}
```

---

## ğŸ” é™¤éŒ¯æç¤º

### æª¢æŸ¥æ§åˆ¶å°è¨Šæ¯

åœ¨ç€è¦½å™¨é–‹ç™¼è€…å·¥å…·ä¸­æŸ¥çœ‹ï¼š

**æˆåŠŸçš„é©—è­‰ï¼š**
```
é–‹å§‹ World ID é©—è­‰...
âœ… World ID é©—è­‰æˆåŠŸ! {...}
ğŸ“¤ ç™¼é€ proof åˆ°å¾Œç«¯é©—è­‰...
âœ… é©—è­‰æˆåŠŸ! {level: 'device', nullifierHash: '0x...'}
```

**å¤±æ•—çš„é©—è­‰ï¼š**
```
é–‹å§‹ World ID é©—è­‰...
âŒ World ID é©—è­‰å¤±æ•—: é©—è­‰å¤±æ•—ï¼Œè«‹é‡è©¦
```

### å¸¸è¦‹å•é¡Œ

**Q: ä¸€ç›´é¡¯ç¤ºã€Œé©—è­‰ä¸­...ã€**
- æª¢æŸ¥ç¶²è·¯é€£æ¥
- ç¢ºèª Action ID æ­£ç¢º
- æŸ¥çœ‹æ§åˆ¶å°éŒ¯èª¤è¨Šæ¯

**Q: æç¤ºã€ŒAction not foundã€**
- ç¢ºèªåœ¨ Developer Portal ä¸­å‰µå»ºäº† action
- æª¢æŸ¥ Action ID æ‹¼å¯«æ˜¯å¦æ­£ç¢º

**Q: åœ¨é–‹ç™¼æ¨¡å¼ä¸‹å¦‚ä½•æ¸¬è©¦ï¼Ÿ**
- ä»£ç¢¼æœƒè‡ªå‹•æ¨¡æ“¬é©—è­‰æˆåŠŸ
- æŸ¥çœ‹æ§åˆ¶å°æœƒé¡¯ç¤ºã€Œé–‹ç™¼æ¨¡å¼ï¼šæ¨¡æ“¬é©—è­‰æˆåŠŸã€

---

## ğŸ“ æª¢æŸ¥æ¸…å–®

éƒ¨ç½²å‰ç¢ºèªï¼š

- [ ] åœ¨ Developer Portal å‰µå»ºäº†é©—è­‰å‹•ä½œ
- [ ] Action ID èˆ‡ä»£ç¢¼ä¸­ä¸€è‡´
- [ ] é¸æ“‡äº†åˆé©çš„é©—è­‰ç­‰ç´šï¼ˆorb/deviceï¼‰
- [ ] åœ¨ World App ä¸­æ¸¬è©¦éçœŸå¯¦é©—è­‰æµç¨‹
- [ ] è¨­ç½®äº†å¾Œç«¯é©—è­‰ï¼ˆå¦‚æœéœ€è¦é˜²ä½œå¼Šï¼‰
- [ ] æ¸¬è©¦äº†é©—è­‰å¤±æ•—çš„æƒ…æ³
- [ ] UI æç¤ºæ¸…æ™°æ˜ç¢º

---

## ğŸš€ é€²éšåŠŸèƒ½

### 1. è¨˜ä½é©—è­‰ç‹€æ…‹

ä½¿ç”¨ localStorage è¨˜ä½ç”¨æˆ¶å·²é©—è­‰ï¼š
```javascript
localStorage.setItem('verified_' + nullifierHash, 'true');
```

### 2. å®šæœŸé‡æ–°é©—è­‰

å°æ–¼æ•æ„Ÿæ“ä½œï¼Œå¯ä»¥è¦æ±‚é‡æ–°é©—è­‰ï¼š
```javascript
if (Date.now() - lastVerifyTime > 24 * 60 * 60 * 1000) {
    // è¶…é 24 å°æ™‚ï¼Œè¦æ±‚é‡æ–°é©—è­‰
    await verifyWorldID();
}
```

### 3. ä¸åŒç­‰ç´šçš„çå‹µ

æ ¹æ“šé©—è­‰ç­‰ç´šçµ¦äºˆä¸åŒçå‹µï¼š
```javascript
const reward = verificationLevel === 'orb' ? 1.0 : 0.5;
```

---

## ğŸ“š ç›¸é—œè³‡æº

- [World ID æ–‡æª”](https://docs.world.org/world-id)
- [Verify API åƒè€ƒ](https://docs.world.org/mini-apps/reference/api#verify-proof)
- [é›¶çŸ¥è­˜è­‰æ˜èªªæ˜](https://docs.world.org/world-id/zero-knowledge-proofs)
- [Developer Portal](https://developer.worldcoin.org/)

---

**ç¾åœ¨ä½ çš„éŠæˆ²æ“æœ‰çœŸäººé©—è­‰åŠŸèƒ½äº†ï¼ğŸ‰ğŸ”**

